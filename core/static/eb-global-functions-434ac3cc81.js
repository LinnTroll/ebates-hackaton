"use strict";function closeit(){$("div#dwindow").hide(),$("div#dwindowcontent").empty()}function loadwindow(e){var t=$("div#dwindowcontent");closeit(),$.post(e).done(function(e){t.html(e),$("div#dwindow").show(),setTimeout(function(){t.scrollTop(0)},0)})}function loadwindowprivacy(e,t){var s,a;s="undefined"!==t&&$("div#join-signup").length>0?t.parentsUntil("div#join-signup").find("#dwindow"):$("#dwindow"),a=s.find("#dwindowcontent"),closeit(),$.post(e).done(function(e){a.html(e),s.show(),setTimeout(function(){a.scrollTop(0)},0)})}function loadwindowterms(e,t){var s,a;s="undefined"!==t&&$("div#join-signup").length>0?t.parentsUntil("div#join-signup").find("#dwindow"):$("#dwindow"),a=s.find("#dwindowcontent"),closeit(),$.post(e).done(function(e){a.html(e),s.show(),setTimeout(function(){a.scrollTop(0)},0)})}function pageSort(){document.returnPAGESort=!1,window[arguments[0]].location=arguments[1],window.scrollBy(0,-70)}function openNewWindow(e,t,s){window.open(e,t,s)}ebates.stickyModule=function(e,t,s,a,o){var i=e.outerHeight();$(window).on("scroll-throttle",function(){var n=t.offset().top-i,r=a.outerHeight()+o,l=$(window).scrollTop(),c=s.offset().top+s.height(),d=c>l;if(n<l+r)return void(!e.hasClass("reached-bottom")&&e.css({position:"absolute",top:n}).addClass("reached-bottom").removeClass("is-in-place reached-top"));d&&!e.hasClass("is-in-place")&&e.css({position:"absolute",top:c}).removeClass("reached-bottom reached-top"),(e.offset().top<=l+r||e.hasClass("reached-bottom"))&&!e.hasClass("reached-top")&&e.css({position:"fixed",top:r}).addClass("reached-top").removeClass("reached-bottom is-in-place")})},top.location!==location&&"app.optimizely.com"!==top.location.hostname&&(top.location.href=document.location.href),$(function(){var e,t=$("body"),s=$(document),a=ebates&&ebates.user&&ebates.user.loggedIn;a&&!$(".no-abp").length&&(e=$('<div class="blockdecoy">&nbsp;</div>'),t.append(e.addClass("google-ads")),setTimeout(function(){!$(".blockdecoy").is(":visible")&&ebates.js.require(ebates.src.abp)},650)),t.one("input",".auto-correct",function(){ebates.js.require(ebates.src.emailCorrector.loader,function(){ebates.loadMailCheck(".auto-correct")})}),a&&!document.querySelector(".no-button-sf")?setTimeout(function(){var e=document.querySelector(".footer-fixed");!document.querySelector("ebatestoolbar")&&e&&function(){return $.browser.webkit||$.browser.mozilla&&!ebates.regex.IE.test(navigator.userAgent)}()&&(""===e.querySelector(".sf-content").innerHTML.trim()||e.classList.contains("yield-to-btn")||"REGISTERED_SHOPPER_NON_BUYER"===ebates.user.status)?($.ajax("/ajax/sf/button.htm",{cache:!0}).done(function(t){e.classList.add("browser-extension"),e.classList.add("bg-gry-f6"),e.classList.remove("yield-to-btn","cc-reminder","bg-w","cc-code-active","cc-blue-bg"),$(".sf-content",e).html(t),ebates.js.require(ebates.src.sf,function(){ebates.sf.init(2)})}).fail(function(){s.trigger("sf-ready")}),s.trigger("button-sf")):s.trigger("sf-ready")},1200):s.trigger("sf-ready"),$("#main-nav").on("mouseover click",".main-cat-link",function(){var e,t=$(this);t.hasClass("img-loaded")||(e=$(".main-cat-sub-image",$(this).parent()).find("img").fadeOut(0),e.each(function(){$(this).attr("src",$(this).attr("data-href"))}).fadeIn(300,function(){t.addClass("img-loaded")}))}),document.body.classList.contains("ios")&&document.body.classList.contains("is-tablet")&&$("#main-nav").on("click",function(){var e,t=$(this);t.hasClass("img-loaded")||(e=$(".main-cat-sub-image",$(this).parent()).find("img").fadeOut(0),e.each(function(){$(this).attr("src",$(this).attr("data-href"))}).fadeIn(300,function(){t.addClass("img-loaded")}))}),$(".back-to-mobile-btn").on("click",function(){return $.post("/mobile_web/ajax/ajax_session_mobiledesktop.vm?set=mobile").done(function(e){"success"===e.trim().toLowerCase()&&window.location.reload()}),!1}),t.on("click",".gplus-btn, .skinny-gplus-btn",function(){var e=$("input[name='ebates.signup.promo']"),t=e.is(":visible")&&($(".v03").length&&e.val()||$("input[name='ebates.signup.promo']:checked","#signForm, #join-signup-form").val()),s=$("input[name='type']").not("#frmStoreSearch2 input[name='type']"),a=s.length&&"&type="+s.val()||"",o=$("#signForm, #signUpForm").is(":visible")&&$("input[name='split_entry_id']").val()||"",i=t&&"&ebates.signup.promo="+t||"",n=o&&"&split_entry_id="+o||"",r="/googleOAuth2.htm?callback=onSignInCallback&urlIdentifier="+encodeURIComponent(encodeURIComponent(browserUrlInfo))+i+n+a;return t||(t=$(this).hasClass("skinny-gplus-btn")?"SUJOIN10-201503":"SU5A-201210"),window.open(r,"popUpWindow","height=500,width=600,left=200,top=100,resizable=yes,scrollbars=yes"),!1}).on("click",".gconnect-btn",function(e){e.preventDefault(),window.open("/googleOAuth2.htm?callback=onConnectCallback","popUpWindow","height=500,width=600,left=400,top=100,resizable=yes,scrollbars=yes")}),$(".sign-out").on("click",function(e){e.preventDefault(),ebates.cookie.set("nm_api",1,-1),document.location=$(this).attr("href")}),function(){var e=$("input[name='all-stores']"),t=$(".merch-menu"),s=location.hostname+(location.port?":"+location.port:"")+"/ajax/all-stores.htm";t.one("click","form",function(){$(this).addClass("loading"),ebates.js.require(ebates.src.suggest.stores,function(){var a=0,o=function(){var t={10634:"/groupon.htm",3993:"/ebay",11445:"/livingsocial.htm"},s=$(this).data("id"),a="/mall_ctrl.do?merchant_id="+s+"&sourceName=Web-Desktop",o=ebates&&ebates.user&&ebates.user.loggedIn?"1"===s?"/Amazon.com_1-xfas?mpl_id=38378&sourceName=Web-Desktop":a:t[s]||a;$(document).trigger("set-nav-id",[ebates.stats.parentNavId+"|"+e.attr("data-navigation-id")]),window.open(o,s).focus(),ebates&&ebates.user&&ebates.user.loggedIn&&"function"==typeof postShopOverlay&&postShopOverlay(s)};ebates.suggest({input:e,url:s,classes:"all-stores ac_results",justLoadAll:!0,click:$.noop}),t.on("mouseleave",".all-stores.ac_results",function(){a=setTimeout(function(){e.trigger("blur")},3e3)}).on("mouseover",".all-stores.ac_results",function(){clearTimeout(a)}),e.trigger("input").on("s-loaded",function(){$("#frmStoresList").find(".suggestion").on("click",o)})})}),$("#frmStoresList").on("submit",function(){return!1})}(),$(function(){var e,t,s,a,o,i,n,r,l;if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){if(e=navigator.userAgent,o=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(o[1]))return a=/\brv[ :]+(\d+)/g.exec(e)||[],"11"===a[1]&&$("div.browserInfo").hide(),{name:"IE",version:a[1]||""};if("Chrome"===o[1]&&null!=(a=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:a[1]};o=o[2]?[o[1],o[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=e.match(/version\/(\d+)/i))&&o.splice(1,1,a[1]),t=o[0],s=o[1],"Firefox"===t&&s<=14?(n=!0,i="fa-firefox",r="https://www.mozilla.org/en-US/firefox/new/"):"Chrome"===t&&s<=20?(n=!0,i="fa-chrome",r="http://www.google.com/chrome/"):"MSIE"===t&&s<=10?(t="Internet Explorer",n=!0,i="fa-internet-explorer",r="https://support.microsoft.com/en-us/help/17621/internet-explorer-downloads"):"Safari"===t&&s<=5?(n=!0,i="fa-safari",r="https://support.apple.com/downloads/safari"):n=!1,n?($("div#oldBrowser").show(),l="<div class='container-fluid h-browser"+pheader+" bg-yel trans-bg ht-40 browserInfo'><div class='container-fixed'><div class='blk0'><div class='blk-group'><div class='blk col3 col_2_3 ht-40'><p class='blk prox-b f-15 lh-40 mar-0 pad-20-l w-685px'>Please upgrade to the latest version of your browser to experience all the perks Ebates has to offer.</p></div><div class='blk col3 ht-40 col-last'><a id='browser-anchor' href='"+r+"' class='h-browser-type lh-40  pad-40-l f-gry-3 bblk nohover specific' target='_blank'><span class='pad-10-t h-icon fa f-18 "+i+" f-17 mar-5-r bblk flt f-gry-3'></span> <span class='bblk flt prox-b'> Upgrade "+t+" Now</span> <span class='pad-10-t fa-chevron-circle-right f-13 mar-5-l f-gry-3 bblk flt'></span></a></div></div></div></div></div>",$("div#oldBrowser").append(l)):$("div#oldBrowser").remove()}}),function(){var e={"/ajax/signin.htm":"si","/ajax/join.htm":"su","/ajax/join2.htm":"hsu","/ajax/join6.htm":"lsu","/ajax/join10.htm":"fsu","/ajax/hotels/su.htm":"hotelsSu","/ajax/gsw-signin.htm":"gswSi"},a={si:"/ajax/signin.htm",su:"/ajax/join.htm",hsu:"/ajax/join2.htm",lsu:"/ajax/join6.htm",fsu:"/ajax/join10.htm",hotelsSu:"/ajax/hotels/su.htm",gswSi:"/ajax/gsw-signin.htm"},o={su:{url:"/ajax/join.htm",modalName:"skinny-su-modal",css:ebates.src.css.skinny},hsu:{url:"/ajax/join2.htm",modalName:"skinny-su-modal",css:ebates.src.css.skinny},lsu:{url:"/ajax/join6.htm",modalName:"skinny-su-modal",css:ebates.src.css.skinny},fsu:{url:"/ajax/join10.htm",modalName:"skinny-su-modal",css:ebates.src.css.skinny},si:{url:"/ajax/signin.htm",modalName:"skinny-si-modal",css:ebates.src.css.skinny},hotelsSu:{url:"/ajax/hotels/su.htm",modalName:"hotels-su-modal",css:ebates.src.css.hotelsSu},gswSi:{url:"/ajax/gsw-signin.htm",modalName:"gsw-si-modal",css:ebates.src.css.gswSi}},i=function(e){var t=this,s=t&&t.classList?function(){setTimeout(function(){t.classList.remove("disabled")},200)}:function(){};return['<div class="pad-30 center">Loading...</div>',{url:o[e].url,css:{files:[ebates.src.css.modal,o[e].css]},classes:{toAdd:["trans-opacity",o[e].modalName,"op0","border-grn-t-3","w-400"]}},{ajax:{done:s,error:s}}]};ebates.overlays=ebates.overlays||{},ebates.overlays.load=function(e){ebates.js.require(ebates.src.modal,function(){ebates.UI.modal.apply(ebates.UI,e)})},s.on("load-overlay",function(e,t){ebates.overlays.load(t)}),setTimeout(function(){!ebates.overlays.activate||!ebates.overlays.activate.options||ebates.UI&&ebates.UI.active&&ebates.UI.active.modal||ebates.overlays.load(ebates.overlays.activate.options)},0),ebates.overlays.skinnyLoader=function(){var e,s,a=this;e=function(e){var s=$(e),o=a.getAttribute("data-track"),i=o&&s.find("input[name='urlIdentifier']");i&&i.length&&i.val(o),t.append(s),setTimeout(function(){$(document).trigger("overlay-loaded")},0)},s=a.getAttribute("data-redirect-url")||a.getAttribute("data-target-url")||window.location.pathname+window.location.search,$.ajax({type:"get",url:this.getAttribute("data-href"),data:{p:s}}).done(e).always(function(){a.classList.remove("disabled")})},ebates.overlays.suSiLoader=function(){var t=this,s=t.getAttribute("data-href"),a=t.getAttribute("data-redirect-url")||t.getAttribute("data-target-url")||location.pathname+location.search;ebates.js.require(ebates.src.modal,function(){var o=i.bind(t)(e[s]);o[1].url=ebates.param.add("p",encodeURIComponent(a),o[1].url),ebates.UI.modal.apply(ebates.UI,o)})},t.on("click",".show-join-overlay",function(t){var s=this.getAttribute("data-href");if(t.preventDefault(),!this.classList.contains("disabled")){this.classList.add("disabled"),$("#join-signup, #signupOverlay, #overlay, #backgroundPopup").remove(),(s&&e[s]?ebates.overlays.suSiLoader:ebates.overlays.skinnyLoader).bind(this)();try{window.localStorage.setItem("auth_source",this.getAttribute("data-auth-source")||"other")}catch(t){}}}),s.on("load-susi-overlay",function(e,t,s){var o=s||document.createElement("a"),i=t&&t["auth-type"],n="su";ebates&&ebates.user&&-1===["FIRST_VISIT","UNREGISTERED"].indexOf(ebates.user.status)&&(n="si"),i=i&&a[i]||a[n],o.setAttribute("data-href",i),t&&t["redirect-url"]&&o.setAttribute("data-redirect-url",t["redirect-url"]),ebates.overlays.suSiLoader.apply(o)}),t.on("click",".auth-required",function(e){ebates&&ebates.user&&ebates.user.loggedIn||(e&&e.preventDefault(),this.classList.contains("disabled")||(this.classList.add("disabled"),s.trigger("load-susi-overlay",[{"auth-type":this.getAttribute("data-auth-type"),"redirect-url":this.getAttribute("href")},this])))})}()});
//# sourceMappingURL=eb-global-functions-434ac3cc81.js.map
