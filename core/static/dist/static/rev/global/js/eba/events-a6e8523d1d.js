"use strict";!function(){!function(e){ebates.events=ebates.events||{},ebates.events.getParent=function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e},ebates.events.webAnalytics=function(e){var t={timestamp:Date.now(),session_id:ebates.events.session_id||"",event_session_id:ebates.events.event_session_id||"",event_type:e.event_type,source:"ebates_com_website",tenant:"ebates.com"};for(var a in e.metadata)t[a]=e.metadata[a];var n=encodeURIComponent(JSON.stringify(t)),s=new Image;return s.src=ebates.events.url+"?string="+n,s},ebates.events.index=function(e){for(var t=ebates.events.getParent(e,"event-track-module").getElementsByClassName("event-track-merchant"),a=0,n=0;n<t.length;n++){if(t[n]==e)return a;1==t[n].nodeType&&a++}return-1},ebates.events.trackImpression=function(t,a){ebates.events.webAnalytics({event_type:"ebatescom-web-event-viewable-impression-v1-avro",metadata:{version:{qa:"4",prod:"2"},guid:ebates.events.guid,page_url:e.location.origin+e.location.pathname,page_url_parameters:e.location.search,browser_agent:navigator.userAgent,non_member_id:ebates.events.non_member_id||"",ip_address:ebates.events.ip_address,position_num:ebates.events.index(t)+1,merchant_name:t.dataset.merchantName,merchant_id:Number(t.dataset.merchantId),module_name:ebates.events.getParent(t,"event-track-module").dataset.moduleName}})},ebates.events.trackClick=function(t,a,n){ebates.events.webAnalytics({event_type:"ebatescom-web-event-adclick-v1-avro",metadata:{version:{qa:"3",prod:"2"},guid:ebates.events.guid,page_url:e.location.origin+e.location.pathname,page_url_parameters:e.location.search,browser_agent:navigator.userAgent,non_member_id:ebates.events.non_member_id||"",ip_address:ebates.events.ip_address,position_num:ebates.events.index(a)+1,merchant_name:a.dataset.merchantName,merchant_id:Number(a.dataset.merchantId),module_name:ebates.events.getParent(a,"event-track-module").dataset.moduleName,destination_url:t.closest("a").href}})},ebates.events.checkView=function(e){var t=e.target,a=void 0,n=void 0;!1!==ebates.UI.isInView(t,.5)&&(t.classList.remove("event-track-view-merchant"),t.classList.add("event-track-view-merchant-ip"),a=setInterval(function(){!0!==ebates.UI.isInView(t,.5)&&(clearInterval(a),clearTimeout(n),t.classList.remove("event-track-view-merchant-ip"),t.classList.add("event-track-view-merchant"))},100),n=setTimeout(function(){clearInterval(a),t.classList.remove("event-track-view-merchant-ip"),!0===ebates.UI.isInView(t,.5)?(ebates.events.trackImpression(t),t.classList.add("event-track-view-merchant-done")):t.classList.add("event-track-view-merchant")},1e3))},ebates.events.checkClick=function(e){var t=ebates.events.getParent(e.target,"event-track-click-merchant");t.classList.remove("event-track-click-merchant"),ebates.events.trackClick(e.target,t),t.classList.add("event-track-click-merchant-done")},ebates.events.triggerViewEvent=function(){$(".event-track-view-merchant").trigger("check-view")},$(".event-track-module").on("check-view",".event-track-view-merchant",ebates.events.checkView),$(".event-track-module").on("click",".event-track-click-merchant a, a.event-track-click-merchant",ebates.events.checkClick)}(window)}();
//# sourceMappingURL=events-a6e8523d1d.js.map