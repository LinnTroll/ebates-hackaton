window.addEventListener("DOMContentLoaded",function(){ebates.psmodal=ebates.psmodal||{};var e=$(document),t=window.location.pathname+Date.now(),a="",o=0,s=function(){"visible"===document.visibilityState&&clearTimeout(o)},i=function(){document.removeEventListener("visibilitychange",s),"visible"!==document.visibilityState?document.addEventListener("visibilitychange",s):clearTimeout(o)},n=function(){ebates.js.require(ebates.src.modal,function(){localStorage.setItem("postShopping-"+a,Date.now()+864e5),ebates.UI.modal('<span class="fa-spinner fa-pulse f-50 f-grn absolute h-v-centered ht-50 w-50"></span>',{url:"/ajax/post-shopping-overlay.htm?merchant_id="+a,classes:{toAdd:["op0","border-grn-t-2","w-600","mw-mar-10-lr"],toRemove:["fixed","border","border-grn-t-5","op0"]},bg:{classes:["op3"]}},{ajax:{done:function(){function e(){t.parentNode.removeChild(t),$(document).trigger("modal-closed"),$(document).trigger("overlay-closed"),$("#eb-modal-bg, .eb-modal-scroller").remove(),ebates.UI.active.modal=null,document.body.classList.remove("overflow-0")}var t=this;data={et:"view-shopping_modal"},ebates.psmodal.sendStats(data),$(".eb-modal-close",this).on("click",function(){data={et:"shopping_modal_dismiss"},ebates.psmodal.sendStats(data)}),$("#eb-modal-bg, .eb-modal-scroller").on("click",function(){data={et:"shopping_modal_dismiss_out"},ebates.psmodal.sendStats(data)}),$(".gotIt",this).on("click",function(){e(),data={et:"click_shopping_modal_got_it"},ebates.psmodal.sendStats(data)}),$("a.see-all",this).on("click",function(){e(),data={et:"click_shopping_modal_all_categories"},ebates.psmodal.sendStats(data)})}}})})};e.on("click","a[href*='-xfas']",function(){var e=$(this).attr("href");e=e.substring(0,e.indexOf("xfas")),a=e.split("_").pop().split("-").shift(),this.href=ebates.param.add("origin",t,this.href),setTimeout(i,1e3)}),window.addEventListener("storage",function(e){var s="postShopping-"+a;e.key&&e.newValue===t&&(localStorage.getItem(s)<+Date.now()||"null"===localStorage.getItem(s))&&(clearTimeout(o),"visible"!==document.visibilityState&&(o=setTimeout(n,6e4)))}),ebates.psmodal.sendStats=function(e){return e.ec="Post Shopping modal_test",e.v="EBA118a",$(document).trigger("stats",{map:{external:e}}),!0}});
//# sourceMappingURL=post-shopping-modal-ef6d30f7e6.js.map
